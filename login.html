<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="./assets/img/icono.png">
    <title>NutriKid</title>

    <!-- Fuentes e íconos -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Estilos -->
    <link rel="stylesheet" href="assets/css/style_login.css">

    <!-- Preload de la imagen -->
    <link rel="preload" href="assets/img/portada.webp" as="image">

    <!-- Boostrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous">
        </script>
</head>

<style>
    .image-container {
        width: 50%;
        background: linear-gradient(rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.1)), url('assets/img/portada.webp');
        background-position: center center;
        background-size: cover;
        image-rendering: optimizeQuality;
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
    }
</style>

<body>
    <div class="login-card">
        <div class="image-container"></div>

        <div class="form-container">
            <h2>Iniciar sesión</h2>
            <p>Ingresa tu nombre de usuario y contraseña</p>

            <form onsubmit="login(event)" autocomplete="off">
                <div class="input-container">
                    <span class="input-icon"><i class="material-icons">person</i></span>
                    <input type="text" class="input-field" name="user" placeholder="Nombre de usuario" required>
                </div>

                <div class="input-container">
                    <span class="input-icon"><i class="material-icons">lock</i></span>
                    <input type="password" class="input-field" name="password" placeholder="Contraseña" required>
                    <span class="input-icon password-toggle">
                        <i class="material-icons">visibility_off</i>
                    </span>
                </div>

                <div class="form-options">
                    <label class="checkbox-label">
                        <input type="checkbox" name="remember">
                        <span>Recuérdame</span>
                    </label>
                    <a href="#" class="forgot-password">Olvidé mi contraseña</a>
                </div>

                <button type="submit">Iniciar sesión</button>
                <p>¿No tienes una cuenta? <a href="register.html">Regístrate aquí</a></p>

            </form>

            <script>
                // Mover toda la lógica de eventos a auth.js
                document.addEventListener('DOMContentLoaded', () => {
                    const form = document.querySelector('form');
                    form.addEventListener('submit', login);
                });
            </script>

            <script src="assets/js/auth.js"></script>

        </div>
    </div>

    <!-- Modal de error -->
    <!-- <div class="modal fade" id="errorModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Error de inicio de sesión</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <span id="modalErrorMessage">Usuario o contraseña incorrectos. Inténtalo de nuevo.</span>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div> -->

    <script>
        function togglePassword(element) {
            const passwordInput = element.previousElementSibling;
            const icon = element.querySelector('i');
            passwordInput.type = passwordInput.type === 'password' ? 'text' : 'password';
            icon.textContent = passwordInput.type === 'password' ? 'visibility_off' : 'visibility';
        }
    </script>
</body>

</html>